<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css" integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
      <!--- The other stuff in the head tag here... -->
      <title> Web App</title>

  </head>
  <body>

    <div class="container mt-3">
        <div class="row">
            <div class="col-md-6 offset-md-3">
                <h1> Generate a thumbnail of a website</h1>
                <!-- <form> -->
                    <input type="url" class="form-control" name="url" id="url"/>
                    <p></p>
                    <p>
                        <button class="btn btn-primary btn-lg" onclick="generate()">Generate</button>
                    </p>
                <!-- </form> -->
            </div>
        </div>
    </div>

    <script>
        async function generate() {
            const url = document.querySelector("#url");
            const api = "http://localhost:3000"
            const payload = { url: url.value}

            const options = {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(payload)
            }

            const response = await fetch(`${api}/api/thumbnail`, options);
            if (response.status >= 200 && response.status <= 299) {
                const jsonResponse = await response.json();
                console.log(jsonResponse);
            } else {
                // Handle errors
                console.log(response);
            }

            // fetch(`${api}/api/thumbnail`, options)
            // .then(function(data) {
            //     if(!data.ok) {
            //         throw Error(data.status)
            //     }
            //     return data.json()
            // })
            // .then(function(update) {
            //     console.log(update)
            // })
            // .catch(function(error) {
            //     console.log('error occured')
            // })
        }
    </script>
  </body>
</html>